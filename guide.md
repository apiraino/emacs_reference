## Index

* <a href="#general_usage">Emacs general usage</a>
* <a href="#js_usage">Javascript specific setup</a>
* <a href="#rust_usage">Rust specific setup</a>
* <a href="#orgmode_usage">Basic Org mode / Org Journal usage</a>
* <a href="#ircmode_usage">Embedded IRC client</a>

### First emacs setup

* Install latest Emacs 25 (don't start it yet)
* Install Prelude: https://github.com/bbatsov/prelude
* Copy `~/.emacs.d/sample/prelude-modules.el` in `~/.emacs.d/prelude-modules.el`
* Uncomment prelude modules: python, rust, yaml. Comment and disable: erc, ivy
* Copy my emacs config files in the `personal` dir
* Start Emacs now (only desired packages will be installed)

### What's in my personal lisp file
* <a href="https://geoff.greer.fm/ag" target="_new">ag</a>: super fast grep replacement
* <a href="https://github.com/davidhalter/jedi" target="_new">jedi</a>: Python autocompletion
* <a href="http://www.flycheck.org" target="_new">flycheck</a>: Python syntax-checking
* <a href="https://github.com/jorgenschaefer/elpy" target="_new">elpy</a>: Emacs Lisp Python Environment
* <a href="https://github.com/flycheck/flycheck-rust" target="_new">flycheck-rust</a>: Rust syntax-checking
* <a href="https://github.com/racer-rust/emacs-racer" target="_new">emacs-racer</a>: Rust code-completion, goto-definition and docs browsing
* <a href="https://github.com/yoshiki/yaml-mode" target="_new">yaml-mode</a>: Major mode fpor YAML files
* <a href="https://github.com/paetzke/py-autopep8.el" target="_new">py-autopep8</a>: Python PEP8 linter
* <a href="https://github.com/syohex/emacs-git-gutter" target="_new">git-gutter</a>: git diff on the fly
* <a href="https://github.com/bastibe/org-journal" target="_new">org-journal</a>: great tool to write a developer's diary
* <a href="https://elpa.gnu.org/packages/xclip.html" target="_new">xclip</a>: (linux only) yanked text in emacs is available in X11 (overwrites X11 clipboard)
* <a href="https://www.emacswiki.org/emacs/rcirc" target="_new">rcirc</a>: (embedded IRC client) configuration
* <a href="https://github.com/w-vi/ox-wk.el" target="_new">ox-wk</a>: module to export from ORG mode to Dokuwiki

## <a name="general_usage"></a>Emacs general usage

#### Run FlyCheck

`C-c ! l, n, ...`

### Common commands to move around

<http://physics.clarku.edu/sip/tutorials/intro_emacs.html>

### Push/Pop to jump around in Python code (provided by Prelude) ##

`C-c .` and `C-c ,` jump to definition, jump back

### Indent/Unindent a selected region

`C-u 4` + `C-x TAB` +indent
`C-u -4`, `C-x TAB` -indent
`C-x TAB` then arrow left/right

### Global search and replace

`M-% string <RET> newstring <RET>` (doesn't work anymore)

`ESC % string <RET> newstring <RET>`

### Reload a buffer

`M-x revert-buffer`

### Read a file into current buffer

`C-x insert-file`

### Windows

https://www.gnu.org/software/emacs/manual/html_node/emacs/Change-Window.html

`C-x o`   Select another window (other-window). That is `o`, not zero.

`C-x 1`   Close all windows but the current one

`C-M-v`   Scroll the next window (scroll-other-window).

### Save the current buffer as new file (a.k.a. "Save as ...")

`C-x C-w` (`M-x write-file`)

### Rename current file in buffer

`C-x C-j` (dired-jump to current file)

R to rename the file (or dired-do-rename).

`C-x k RET` to go back to the (renamed) buffer

### Grep

`C-c p g`       Old grep shortcut

`C-c p s g`     New grep shortcut

or just use `ag` (`M-x ag`)

### Show Python docstring for function (provided by Prelude)

`C-c ?`

### Abbreviations

* write `import pdb; pdb.set_trace()"`
* `C-u 5`: ???
* `C-a ixg`: ???
* input name of the abbreviation shortcut (e.g. `trace`)
* `M-x write-abbrev-file`: save abbreviation in file (e.g. `~user/.emacs.d/abbrev_defs`)
* `M-x abbrev-mode`: enable abbreviation mode
* use abbreviation: write `trace<space>` and ... voilà
* Now you can extend the abbreviation file directly and reload with:
`M-x load-file ~user/.emacs.d/abbrev_defs`

### Retrieve from cut&paste stack

`C-y`: pop
`M-y`: show stack
`C-y` + `M-y` to walk through the stack entries

### Bookmarks

* `C-x rm` Save a bookmark
* `C-x rb` Move to a bookmark
* `M-x bookmark-delete <RET> bookmark <RET>` Delete a bookmark

### Apropos

`C-h a`

### Select entire buffer (select all)

`C-x h`

### Reindent buffer and remove TABs (e.g. in HTML files generated by evil Adobe IDEs)
* Select region of entire buffer
* `tab` to remove excessive indent
* `M-x untabify` to replace evil TABs with virtuous spaces

### Go to line number

`M-g g <num>`

### Go to the top / bottom of the buffer

`ESC <` / `ESC >`

`C-Home` / `C-End`

### Themes

`M-x customize-themes`: enter theme selection

`M-x color-theme-...`: select a theme

`M-x disable-theme`: yeah, disable a theme

### Search and replace in entire project (whatever 'project' means...)

`C-c p r`

### Join lines

`C-^`

### Line Wrap

`M-q` (a.k.a. `fill-paragraph`) or activate [Auto Fill Mode](https://www.emacswiki.org/emacs/AutoFillMode)

### Registers

`C-x r s [a, 1, b, 5, r, ...]`: copy region into register [a, 1, b, 5, r, ...] (copy-to-register)

`C-x r i [a, 1, b, 5, r, ...]`: insert text from register [a, 1, b, 5, r, ...] (insert-register)

### Comment/Uncomment a region

`M-;`

### Update all installed EMACS packages

`M-x package-list-packages`

`Ux` <confirm>

### Close / Clean buffers

`M-x` kill-some-buffers

`C-x #` close all buffers

 `M-x clean-buffer-list` close all unmodified buffers

### Find command defined by a key binding

`C-h k` then execute the keycombo

### Break a long line into multiple lines

`M-q` (toggle-truncate-lines)

### Magit survival guide

* `M-x magit-status` Get into Magit
* `d` diff changes
* `s`, `u` and `d`: stage, unstage, discard hunk
* `c` then `c`: commit changes
* Write commit message then `C-x s` and `C-c C-c`
* `P u` to push to origin

### Hot reload EMACS config (f.e. to refresh pkg installed)

Open your custom `.el` config file in a new buffer

`M-x eval-buffer`

### Recursively find and replace in files not already open

See [here](https://stackoverflow.com/a/271136)

## <a name="js_usage"></a>Javascript specific setup

`C-c ! s` Flyckeck javascript: choose linter (e.g. `javascript-standard`)

`C-c ! v` Flyckeck javascript: verify current linter setup

`C-c ! x` Flycheck javascript: disable a linter

## <a name="rust_usage"></a>Rust specific setup

* install racer

  `$ cargo install racer`

  `$ rustup component add rust-src`

  `$ export RUST_SRC_PATH="$(rustc --print sysroot)/lib/rustlib/src/rust/src"`

* Install autoformatter

  `$ cargo install rustfmt`

* Cargo specific commands available

  `C-c C-c C-b` to run cargo build

  `C-c C-c C-r` to run cargo run

  `C-c C-c C-t` to run cargo test

## <a name="orgmode_usage"></a>Org mode primer

`C-c C-e` export an org buffer to something else (HTML, markdown, etc.)

`C-c C-o` open a link in default browser

`C-c C-l` edit a link

`C-c C-c` to check a checkbox (represented by a `[ ]`)

`C-u C-u C-c C-c` to set a checkbox to `[-]`

`M-x customize-variable RET org-export-backends` modify export modes enabled

To export to Mediawiki format, use `ox-wk`. Enable it by adding to your emacs personal init file:
```
(require 'ox-wk)
```

And use it with:

`ox-wk-export-as-wiki` export to temporary buffer

`ox-wk-export-to-wiki` export to ".txt" file


### org-journal

* `M-x org-journal` set journal mode
* `C-c C-s` (<= `org-journal-search`) search term in journal (accepting the `org-read-date` format such as "-1y" or "-1m")
* `C-f f f` search term in all entries (`org-journal-search-forever`)
  buffers are opened read-only. `C-c view-mode` or `e` to edit.

#### calendar-mode

* `M-x calendar` open calendar
* `C-j` view highlighted journal entry
* `e` switch from read-only to edit mode for current journal entry
* `C-u i j` edit selected journal entry (`org-journal-new-date-entry`)
* `C-c C-j` edit today's journal (creating a new entry)
* `C-u C-c C-j`: edit today's journal (**without** creating a new entry)

For more, see [here](https://github.com/bastibe/org-journal/blob/9fc8eaf9279563f79d9ba7ff1d381534cfa57ec3/org-journal.el#L45)

Formatting text:

* `*bold*, /italic/, _underlined_, =verbatim=, ~code~ and ‘+strike-through+’`

References:

- Org Mode manual: https://orgmode.org/manual/index.html
- Org Mode markup for export: https://orgmode.org/manual/Markup.html#Markup
- Org Journal: https://www.emacswiki.org/emacs/OrgJournal
- https://github.com/bastibe/org-journal/issues/93#issuecomment-360707226


## <a name="ircmode_usage"></a>Embedded IRC client

`M-x irc` enable IRC mode

`C-u M-x rcirc` setup connection parameters (server, port, nick, channel, etc.)
